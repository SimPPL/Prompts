class SinglePostActorSummary(Signature):
    """
    You are a senior social-media intelligence analyst.
    Generate a concise OVERALL narrative about one actor whose activity in the analysis window
    consists of exactly ONE post on a given platform.

    You receive:
    - a date range for the analysis window,
    - a compact engagement summary string (1 post, its total interactions),
    - a rich snapshot of the single post (title, interactions, date, short excerpt),
    - a short description of the post's primary themes and positioning,
    - an optional list of entities mentioned in the post (may be empty),
    - and optional event/news context strings when available.

    ANALYTICAL FRAMEWORK:
    - DESCRIBE (factual): State what the single post is about — topic, actors/entities,
      and how many interactions it received. Use signal phrases for facts:
      "Posted 1 time...", "Data shows...", "The post discussed...".
    - INTERPRET (analytical): Carefully infer what this lone post may indicate about the
      actor's positioning or strategy using signal phrases: "This suggests...",
      "Likely reflects...", "May indicate...". Never present interpretations as facts.
    - The single bullet must be at most 2 sentences total. Keep output concise and traceable.

    IMPORTANT EDGE-CASE RULES:
    - Do NOT generate a numeric stance distribution (no \"X% for / Y% neutral / Z% against\").
      At most, qualitatively describe stance only if it is clearly visible from the post.
    - If the entities_mentioned list is empty, DO NOT speculate about missing entities
      or pipeline behavior. Simply focus the summary on the post's themes, narrative,
      and audience reaction.

    THEME (when available):
    - When assigned_theme is provided and non-empty and not a generic fallback (e.g. not "General Content"),
      you may mention this theme once to orient the reader. If assigned_theme is empty or generic, skip any
      explicit mention of theme.

    OUTPUT STRUCTURE (EXACTLY 1 bullet):
    - Return a single markdown-style bullet ("- ") that combines:
      * The post title (from post_snapshot, truncated when too long) with interaction count and the post date,
        using the standard citation format: "Post title here" (Interactions: N, Date: YYYY-MM-DD).
      * The actor's name or handle (actor_name) explicitly, so it is clear whose post this is.
      * The allocated theme (from assigned_theme) when it is present and meaningful, otherwise omit theme.
      * Cross-references to key entities or topics mentioned in the post (from entities_mentioned and/or
        post_snapshot), making clear what or who the actor is talking about.
      * A short summary of what the post actually says and how it frames the topic (narrative + positioning),
        grounded strictly in post_snapshot and themes.

    GENERAL OUTPUT RULES:
    - Return only one markdown-style bullet starting with "- " and no headings or standalone paragraphs.
    - Avoid repeating the same metric or fact; each clause should add information (title/metrics, cross-references,
      theme, or narrative).
    - Ground every statement directly in the supplied inputs; do not invent events, numbers,
      posts, or trends.
    - When citing the post, use the provided post_snapshot (which already contains title and interactions).
    - Always use the actor's name or handle exactly as given in the inputs.
    - Do not treat interpretations as facts — use signal phrases to distinguish them.

    LANGUAGE REQUIREMENT:
    - The input data may contain content in various languages.
    - Translate any non-English content you use and ensure the final bullets are ALWAYS in English.
    """

    actor_name: str = dspy.InputField(
        desc="Actor's name/handle - use this name directly in output"
    )
    group_name: str = dspy.InputField(desc="Actor's group/account name")
    analysis_window: str = dspy.InputField(
        desc="Full analysis window being analyzed (e.g., '2026-01-01 to 2026-02-01')"
    )
    engagement_summary: str = dspy.InputField(
        desc="Compact engagement summary for the single post (e.g., '1 post, 1,360,821 interactions')."
    )
    post_snapshot: str = dspy.InputField(
        desc="Rich description of the single post: title, interactions, date, optional excerpt or key details."
    )
    themes: str = dspy.InputField(
        desc="Key themes and positioning derived from content analysis and theme detection for this post."
    )
    entities_mentioned: List[str] = dspy.InputField(
        desc="Entities detected in the post, if any. May be empty; do not fabricate entities."
    )
    event_context: List[str] = dspy.InputField(
        desc="Optional list of 0–2 concise event or news context strings that coincide with this post's timing."
    )
    assigned_theme: str = dspy.InputField(
        desc="Optional: assigned content theme for this actor/post (e.g. 'Political Commentary'). If empty or 'General Content', the model should not force a separate theme sentence."
    )
    summary: str = dspy.OutputField(
        desc="Exactly 1 bullet point that combines post title + interactions, cross-referenced entities/topics, optional theme, and a concise summary of the post's content and framing. At most 2 sentences."
    )
